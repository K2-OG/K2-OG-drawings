<main>
  <div class="frame">
    <!-- STARS -->
    <div class="stars-container">
      <div class="stars"></div>
    </div>

    <!-- SUN  -->
    <div class="sun-position">
      <div class="sun"></div>
    </div>

    <!-- BUILDINGS -->
    <div class="buildings-container">
      <ng-container
        [ngTemplateOutlet]="buildings"
        [ngTemplateOutletContext]="{ side: 'lefties' }"
      ></ng-container>
      <ng-container
        [ngTemplateOutlet]="buildings"
        [ngTemplateOutletContext]="{ side: 'righties' }"
      ></ng-container>
    </div>

    <!-- THE GRID -->
    <div class="grid-wrapper">
      <div class="grid-bg"></div>
      <div class="grid"></div>
    </div>

    <!-- POST GRAIN -->
    <!-- <div class="grain"></div> -->
  </div>
</main>

<ng-template #tower>
  <div class="tower" *ngFor="let tower of towers">
    <div class="shadow"></div>
    <div class="windows"></div>
    <div class="roof-container">
      <div class="roof">
        <div class="shadow"></div>
      </div>
      <div class="roof">
        <div class="shadow"></div>
      </div>
      <div class="roof">
        <div class="shadow"></div>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #buildingLayer let-layerOrder="layerOrder">
  <div class="layer {{ layerOrder }}">
    <ng-container *ngTemplateOutlet="tower"></ng-container>
  </div>
</ng-template>

<ng-template #buildings let-side="side">
  <div class="buildings {{ side }}">
    <ng-container
      [ngTemplateOutlet]="buildingLayer"
      [ngTemplateOutletContext]="{ layerOrder: 'first-layer' }"
    ></ng-container>
    <!-- <div class="layer second-layer">
    </div> -->
  </div>
</ng-template>
