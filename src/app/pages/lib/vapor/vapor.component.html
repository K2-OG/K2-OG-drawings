<main>
  <div class="frame">
    <!-- STARS -->
    <div class="stars-container">
      <div class="stars">
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
      </div>
    </div>

    <!-- SUN  -->
    <div class="sun-position">
      <div class="sun"></div>
    </div>

    <!-- GRID BG -->
    <div class="grid-wrapper">
      <div class="grid-bg"></div>
    </div>

    <!-- BUILDINGS -->
    <!-- <ng-container *ngFor="let that of [1, 2, 3, 4, 5, 6]"> -->
    <div class="buildings-container">
      <ng-container
        [ngTemplateOutlet]="buildings"
        [ngTemplateOutletContext]="{ side: 'lefties' }"
      ></ng-container>
      <ng-container
        [ngTemplateOutlet]="buildings"
        [ngTemplateOutletContext]="{ side: 'righties' }"
      ></ng-container>
    </div>
    <!-- </ng-container> -->

    <!-- THE GRID -->
    <div class="grid-wrapper">
      <div class="grid"></div>
      <div class="track"></div>
      <div class="grid-bg-v"></div>
    </div>

    <!-- DELOREAN -->
    <div class="delorean-bopper">
      <div class="delorean"></div>
    </div>

    <!-- POST GRAIN -->
    <!-- <div class="grain"></div> -->
  </div>
</main>

<ng-template #roofs let-amount="amount">
  <div class="roof-container">
    <div class="roof" *ngFor="let roof of amount">
      <div class="roof-shadow"></div>
    </div>
  </div>
</ng-template>

<ng-template #tower>
  <div class="tower" *ngFor="let tower of towers">
    <div class="body">
      <div class="shadow"></div>
      <div class="windows-position">
        <div class="windows"></div>
      </div>
    </div>
    <ng-container
      [ngTemplateOutlet]="roofs"
      [ngTemplateOutletContext]="{ amount: tower.roofAmount }"
    ></ng-container>
  </div>
</ng-template>

<ng-template #buildingLayer let-layerOrder="layerOrder">
  <div class="layer {{ layerOrder }}">
    <ng-container *ngTemplateOutlet="tower"></ng-container>
  </div>
</ng-template>

<ng-template #buildings let-side="side">
  <div class="buildings {{ side }}">
    <ng-container
      [ngTemplateOutlet]="buildingLayer"
      [ngTemplateOutletContext]="{ layerOrder: 'first-layer' }"
    ></ng-container>
  </div>
</ng-template>
